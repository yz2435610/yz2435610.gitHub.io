(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3134e14d"],{"71ab":function(t,a,s){"use strict";s("b832")},9483:function(t,a,s){"use strict";s.r(a);var i=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"wsy_box"},[s("div",{staticClass:"header_container"},[s("div",{staticClass:"header_wrapper"},[s("div",{staticClass:"head_left"},[s("van-icon",{attrs:{name:"arrow-left"},on:{click:t.onClickLeft}})],1),s("div",{staticClass:"head_title"},[t._v("信息填写")]),s("div",{staticClass:"head_icon"})])]),s("div",{staticClass:"wsy_info_box"},[s("div",{staticClass:"box",on:{click:function(a){t.show_head=!0}}},[s("div",{staticClass:"left"},[s("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:function(a){return t.lwh_inpu()}}}),s("span",[t._v("头像")]),s("img",{attrs:{src:t.lwh_info.avatar,alt:""}})]),s("div",{staticClass:"right"},[s("van-icon",{attrs:{color:"#CACACA",size:"24px",name:"arrow"}})],1)]),s("div",{staticClass:"box",on:{click:function(a){return t.toSetNickName()}}},[s("div",{staticClass:"left"},[s("span",[t._v("昵称")]),s("span",[t._v(t._s(t.lwh_info.nickname))])]),s("div",{staticClass:"right"},[s("van-icon",{attrs:{color:"#CACACA",size:"24px",name:"arrow"}})],1)]),s("div",{staticClass:"box"},[s("div",{staticClass:"left"},[s("span",[t._v("手机号")]),s("span",[t._v(t._s(t.lwh_info.mobile))])]),s("div",{staticClass:"right"})]),s("div",{staticClass:"box",on:{click:function(a){return t.toSetSex()}}},[s("div",{staticClass:"left"},[s("span",[t._v("性别")]),0==t.lwh_info.sex?s("span",[t._v("男")]):t._e(),1==t.lwh_info.sex?s("span",[t._v("女")]):t._e()]),s("div",{staticClass:"right"},[s("van-icon",{attrs:{color:"#CACACA",size:"24px",name:"arrow"}})],1)]),s("div",{staticClass:"box",on:{click:function(a){return t.datePopup()}}},[s("div",{staticClass:"left"},[s("span",[t._v("出生日期")]),s("span",[t._v(t._s(t.lwh_info.birthday))])]),s("div",{staticClass:"right"},[s("van-icon",{attrs:{color:"#CACACA",size:"24px",name:"arrow"}})],1)]),s("div",{staticClass:"box",on:{click:function(a){return t.sitePopup()}}},[s("div",{staticClass:"left"},[s("span",[t._v("所在城市")]),s("span",[t._v(t._s(t.lwh_info.province_name+","+t.lwh_info.city_name+","+t.lwh_info.district_name))])]),s("div",{staticClass:"right"},[s("van-icon",{attrs:{color:"#CACACA",size:"24px",name:"arrow"}})],1)]),s("div",{staticClass:"box",on:{click:t.toSetSubject}},[s("div",{staticClass:"left"},[s("span",[t._v("学科")]),s("span",[t._v(t._s(t.xk.join(" ")))])]),s("div",{staticClass:"right"},[s("van-icon",{attrs:{color:"#CACACA",size:"24px",name:"arrow"}})],1)]),s("div",{staticClass:"box",on:{click:t.setClass}},[s("div",{staticClass:"left"},[s("span",[t._v("年级")]),s("span",[t._v(t._s(t.xj))])]),s("div",{staticClass:"right"},[s("van-icon",{attrs:{color:"#CACACA",size:"24px",name:"arrow"}})],1)])]),s("van-popup",{style:{height:"40%"},attrs:{position:"bottom"},model:{value:t.datePopupIsShow,callback:function(a){t.datePopupIsShow=a},expression:"datePopupIsShow"}},[s("van-datetime-picker",{attrs:{type:"date","min-date":t.minDate,"max-date":t.maxDate},on:{confirm:t.setDate},model:{value:t.currentDate,callback:function(a){t.currentDate=a},expression:"currentDate"}})],1),s("van-popup",{style:{height:"40%"},attrs:{position:"bottom"},model:{value:t.sitePopupIsShow,callback:function(a){t.sitePopupIsShow=a},expression:"sitePopupIsShow"}},[s("van-area",{attrs:{"area-list":t.lwh_city,"columns-num":3,value:t.lwh_info.district_id+""},on:{confirm:t.lwh_cs,change:t.lwh_ct,cancel:function(a){t.sitePopupIsShow=!1}}})],1),s("van-popup",{style:{height:"40%"},attrs:{position:"bottom"},model:{value:t.classPopupIsShow,callback:function(a){t.classPopupIsShow=a},expression:"classPopupIsShow"}},[s("van-picker",{attrs:{title:"","show-toolbar":"","value-key":"name",columns:t.classColumns},on:{confirm:t.onConfirm,cancel:t.onCancel,change:t.onChange}})],1),s("van-popup",{style:{height:"25%"},attrs:{position:"bottom"},model:{value:t.show_head,callback:function(a){t.show_head=a},expression:"show_head"}},[s("ul",{staticClass:"lwh_headImg"},[s("li",{on:{click:function(a){return t.lwh_tog()}}},[t._v("拍照")]),s("li",{on:{click:function(a){return t.lwh_tog()}}},[t._v("从手机相册选择")]),s("li",{on:{click:function(a){t.show_head=!1}}},[t._v("取消")])])])],1)},e=[],o=s("a964"),l=(s("8587"),s("01e2")),c={name:"",components:{},props:{},data(){return{lwh_info:[],show_head:!1,minDate:new Date(1980,0,1),maxDate:new Date(2021,10,1),currentDate:new Date,datePopupIsShow:!1,sitePopupIsShow:!1,classPopupIsShow:!1,columns:[],classColumns:[],xj:"",xk:[],lwh_city:{province_list:{},city_list:{},county_list:{}},lwh_bs:null}},created(){},mounted(){this.lwh_Ajax(),this.sitePopdow(),this.lwh_class(),this.$nextTick(()=>{this.lwh_bs=new o["a"](".lwh_is",{probeType:2,click:!0,scrollX:!0,scrollY:!1}),console.log(this.lwh_bs)})},activated(){},update(){},beforeRouteUpdate(t,a,s){s()},methods:{onClickLeft(){this.$router.back(1)},async lwh_Ajax(){let{data:t}=await this.$http.get("https://www.365msmk.com/api/app/userInfo?");this.lwh_info=t.data,this.xk=[],t.data.attr.map(t=>{"学科"==t.attr?this.xk.push(t.attr_value):"年级"==t.attr&&(console.log(this.xj),this.xj=t.attr_value)}),this.xj=""==this.xj?"请选择":this.xj,console.log(this.xk)},async lwh_class(){let{data:t}=await this.$http.get("https://www.365msmk.com/api/app/module/attribute/1?");console.log(t.data[0].value),this.classColumns=t.data[0].value},lwh_tog(){this.$refs.file.click()},async lwh_inpu(){console.log(1);let t=new FormData;t.append("file",event.target.files[0]),console.log(t.get("file"));let{data:a}=await this.$http.post("https://www.365msmk.com/api/app/public/img",t),{data:s}=await this.$http.put("https://www.365msmk.com/api/app/user",{avatar:a.data.path});this.lwh_Ajax(),this.show_head=!1},toSetNickName(){this.$router.push("/wsySetNickName")},toSetSex(){this.$router.push("/wsySetSex")},datePopup(){this.datePopupIsShow=!0},sitePopup(){this.sitePopupIsShow=!0},async sitePopdow(){let{data:t}=await this.$http.get("https://www.365msmk.com/api/app/sonArea/0");this.lwh_city.province_list=this.lwh_citys(t.data);let{data:a}=await this.$http.get("https://www.365msmk.com/api/app/sonArea/"+(this.lwh_info.province_id?this.lwh_info.province_id:t.data[0].id));this.lwh_city.city_list=this.lwh_citys(a.data);let{data:s}=await this.$http.get("https://www.365msmk.com/api/app/sonArea/"+(this.lwh_info.city_id?this.lwh_info.city_id:a.data[0].id));this.lwh_city.county_list=this.lwh_citys(s.data)},lwh_citys(t){let a={};for(let s=0;s<t.length;s++)a[t[s].id]=t[s].area_name;return a},setClass(){this.classPopupIsShow=!0},async setDate(t){var a=new Date(t),s=a.getFullYear(),i=a.getMonth()+1,e=a.getDate();let{data:o}=await this.$http.put("https://www.365msmk.com/api/app/user",{birthday:`${s}-${i}-${e}`});201==o.code&&Object(l["a"])("信息更新成功"),console.log(o.code),this.lwh_Ajax(),this.datePopupIsShow=!1},async lwh_ct(t,a,s){switch(s){case 0:let{data:t}=await this.$http.get("https://www.365msmk.com/api/app/sonArea/"+a[s].code);this.lwh_city.city_list=this.lwh_citys(t.data);let{data:i}=await this.$http.get("https://www.365msmk.com/api/app/sonArea/"+t.data[0].id);this.lwh_city.county_list=this.lwh_citys(i.data);break;case 1:let{data:e}=await this.$http.get("https://www.365msmk.com/api/app/sonArea/"+a[s].code);this.lwh_city.county_list=this.lwh_citys(e.data);break;default:break}},async lwh_cs(t){let{data:a}=await this.$http.put("https://www.365msmk.com/api/app/user",{province_id:t[0].code,city_id:t[1].code,district_id:t[2].code});this.sitePopupIsShow=!1,this.lwh_Ajax()},toSetSubject(){this.$router.push("/wsySetSubject")},async onConfirm(t){let a=[{attr_id:1,attr_val_id:t.id},{attr_id:2,attr_val_id:7}],{data:s}=await this.$http.put("https://www.365msmk.com/api/app/user",{user_attr:JSON.stringify(a)});console.log(s,JSON.stringify(a)),this.classPopupIsShow=!1,this.lwh_Ajax()},onChange(t,a,s){},onCancel(){this.classPopupIsShow=!1}},filters:{},computed:{},watch:{}},n=c,h=(s("71ab"),s("c701")),p=Object(h["a"])(n,i,e,!1,null,"488c8b70",null);a["default"]=p.exports},b832:function(t,a,s){}}]);
//# sourceMappingURL=chunk-3134e14d.83a4a8ca.js.map